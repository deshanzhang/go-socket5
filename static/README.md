# SOCKS5 Web管理面板

## 概述

SOCKS5 Web管理面板是一个现代化的Web界面，用于管理和监控SOCKS5代理服务器。它提供了实时状态监控、连接管理、配置管理等功能。

## 功能特性

### 📊 实时监控
- **服务器状态**: 实时显示服务器运行状态
- **连接统计**: 当前连接数和总连接数
- **运行时间**: 服务器运行时长
- **性能指标**: 自动刷新统计数据

### 🔗 连接管理
- **活跃连接**: 查看所有活跃的代理连接
- **连接详情**: 显示客户端IP、目标地址、连接时长
- **连接控制**: 支持断开指定连接
- **连接测试**: 测试到目标服务器的连接

### ⚙️ 配置管理
- **服务器配置**: 查看和修改服务器参数
- **认证设置**: 管理用户认证信息
- **连接限制**: 设置最大连接数
- **黑名单管理**: 管理IP黑名单

### 📝 日志查看
- **实时日志**: 查看服务器运行日志
- **日志过滤**: 按级别和时间过滤日志
- **日志导出**: 支持日志导出功能

## 界面说明

### 主界面布局
```
┌─────────────────────────────────────────┐
│ 🚀 SOCKS5 代理服务器管理面板            │
├─────────────────────────────────────────┤
│ ✅ 服务器状态                           │
│ 📊 统计卡片 (连接数、总连接、运行时间)   │
├─────────────────────────────────────────┤
│ 📊 概览 | 🔗 连接管理 | ⚙️ 配置 | 📝 日志 │
├─────────────────────────────────────────┤
│ 标签页内容区域                          │
└─────────────────────────────────────────┘
```

### 标签页功能

#### 📊 概览
- 服务器基本信息
- 配置信息显示
- 快速操作按钮

#### 🔗 连接管理
- 活跃连接列表
- 连接测试工具
- 连接控制功能

#### ⚙️ 配置管理
- 服务器参数配置
- 认证设置
- 连接限制设置

#### 📝 日志查看
- 实时日志显示
- 日志刷新功能
- 日志过滤选项

## API接口

### 基础接口
- `GET /ping` - 健康检查
- `GET /api/stats` - 获取服务器统计
- `GET /api/status` - 获取服务器状态

### 连接管理
- `GET /api/connections` - 获取活跃连接列表
- `GET /api/connections/:id` - 获取连接详情
- `DELETE /api/connections/:id` - 断开指定连接

### 配置管理
- `GET /api/config` - 获取服务器配置
- `PUT /api/config` - 更新服务器配置

### 系统管理
- `POST /api/restart` - 重启服务器
- `POST /api/test` - 测试连接
- `GET /api/logs` - 获取服务器日志

## 使用方法

### 1. 启动服务
```bash
# 启动SOCKS5服务器和Web面板
go run main.go
```

### 2. 访问Web界面
```
http://localhost:8080
```

### 3. 查看API文档
```
http://localhost:8080/api/
```

### 4. 测试API接口
```bash
# 使用提供的测试脚本
python test_web_panel.py
```

## 配置说明

### 服务器配置
```yaml
socks5:
  host: 0.0.0.0
  port: 1080
  user: test
  password: test
  blacklist: []
  auth_list: [1, 2]

gin:
  host: 0.0.0.0
  port: 8080
  mode: release
```

### 环境变量
- `SOCKS5_HOST` - SOCKS5服务器监听地址
- `SOCKS5_PORT` - SOCKS5服务器端口
- `WEB_HOST` - Web面板监听地址
- `WEB_PORT` - Web面板端口

## 开发说明

### 前端技术栈
- **HTML5**: 页面结构
- **CSS3**: 样式设计
- **JavaScript**: 交互逻辑
- **Fetch API**: 数据请求

### 后端技术栈
- **Go**: 服务器端语言
- **Gin**: Web框架
- **Goroutines**: 并发处理

### 文件结构
```
static/
├── index.html      # 主页面
├── script.js       # JavaScript逻辑
├── style.css       # 样式文件
└── README.md       # 说明文档
```

## 故障排除

### 常见问题

1. **Web界面无法访问**
   - 检查HTTP服务器是否启动
   - 确认端口8080是否被占用
   - 查看防火墙设置

2. **API接口无响应**
   - 检查服务器日志
   - 确认API路由配置
   - 验证请求格式

3. **连接数据不更新**
   - 检查SOCKS5服务器状态
   - 确认连接统计逻辑
   - 查看浏览器控制台

### 调试方法

1. **查看服务器日志**
   ```bash
   go run main.go
   ```

2. **检查API响应**
   ```bash
   curl http://localhost:8080/api/stats
   ```

3. **浏览器调试**
   - 打开开发者工具
   - 查看Network标签
   - 检查Console错误

## 扩展功能

### 计划中的功能
- [ ] 用户认证和权限管理
- [ ] 实时图表和统计
- [ ] 配置文件热重载
- [ ] 多服务器集群管理
- [ ] 告警和通知系统

### 自定义开发
- 修改 `static/script.js` 添加新功能
- 更新 `server/http_server.go` 添加新API
- 自定义 `static/style.css` 调整界面

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进Web面板功能。